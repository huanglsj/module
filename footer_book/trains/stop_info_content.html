<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">

	<head>
		<title></title>
		<meta charset="utf-8">
		<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" href="../../css/fonts/font-awesome.min.css">
		<link rel="stylesheet" href="../../css/ui-box.css">
		<link rel="stylesheet" href="../../css/ui-base.css">
		<link rel="stylesheet" href="../../css/ui-color.css">
		<link rel="stylesheet" href="../../css/appcan.icon.css">
		<link rel="stylesheet" href="../../css/appcan.control.css">
		<link rel="stylesheet" href="css/train-ticket.css">
	</head>

	<body class="um-vp bc-bg sc-bg-active" ontouchstart>
		<div class="stop-info">
			<div class="stop-head ub ub-ac">
				<div>车站名称</div>
				<div>到达</div>
				<div>出发</div>
				<div>停留</div>
			</div>
			<ul class="stop-con" id="stopInfoList" v-cloak>
				<li class="ub ub-ac" v-for='item in items'>
					<div>{{item.station_name}}</div>
					<div>{{item.arrive_time}}</div>
					<div>{{item.start_time}}</div>
					<div>{{item.stopover_time}}</div>
				</li>
			</ul>
		</div>
	</body>
	<script src="../../js/appcan.js"></script>
	<script src="../../js/appcan.control.js"></script>
	<script src="../../js/common.js"></script>
	<script src="../../js/vue.js"></script>
	</body>
	<script>
		var info = appcan.getLocVal('trainDetail');
		info = eval("(" + info + ")");
		var dataInfo = {};
		if(info) {
			dataInfo.train_no = info.train_no;
			dataInfo.from_station_telecode = info.from_station_telecode;
			dataInfo.to_station_telecode = info.to_station_telecode;
			dataInfo.depart_date = appcan.locStorage.getVal("start_train_date");
		}

		var app = new Vue({
			el: '#stopInfoList',
			data: {
				items: []
			}
		})

		appcan.ready(function() {
			addMask("../../img/loading.gif", "加载中...");
			getTrainStation();
		});

		function getTrainStation() {
			appcan.request.ajax({
				url: httpHost + 'trainController.do?queryTrainStation',
				type: 'POST',
				beforeSend: addHeader,
				data: dataInfo,
				dataType: 'json',
				success: function(data) {
					removeMask();
					if(data.success) {
						app.items = data.obj;
					} else {
						if(data.msg == "用户未登录") {
							reLogin(getTrainStation);
						} else {
							appcan.window.openToast(data.msg, 2000);
						}
					}
				},
				error: function(e, err) {
					removeMask();
					appcan.window.closeToast();
				}
			});
		}
	</script>

</html>